
<div class="block-heading">
    <p id="heading">Login with your <b>username</b> and <b>password</b></p>
    <mat-dialog-content>
        <form [formGroup]="loginForm" (ngSubmit)="onFormSubmit()">
            <div class="row" [ngSwitch]="onbodystep">
                <div *ngSwitchCase=1>
                    <div class="form-group">
                        <div class="input-container">
                            <mat-form-field appearance="outline">
                                <ngx-mat-intl-tel-input placeholder="Phone number" formControlName="userName"
                                    [enablePlaceholder]="true" [enableSearch]="true" [preferredCountries]="['om']"
                                    name="phone" [ngClass]="{'is-invalid': submitted && fval.userName.errors }" required>
                                </ngx-mat-intl-tel-input>
                                <mat-error>
                                    Phone number <strong>required</strong>
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div *ngIf="submitted && fval.userName.errors" class="invalid-feedback">
                            <div *ngIf="fval.userName.errors.required">Please provide email or username
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-top: 10px;">
                <div>
                    <div class="form-group">
                        <div class="input-container pt-1">
                            <mat-form-field appearance="outline">
                                <mat-label>Password</mat-label>
                                <input matInput [type]="hide ? 'password' : 'text'"
                                    formControlName="password" required>
                                    <span matSuffix (click)="hide = !hide"> <i *ngIf="!hide"
                                        class=" fas fa-eye "></i>
                                    <i *ngIf="hide" class="fas fa-eye-slash"></i>
                                </span>
                                <mat-error>
                                    Password <strong>required</strong>
                                </mat-error>
                            </mat-form-field>
                        </div>

                        <div *ngIf="submitted && loginForm.get('password')?.valid" class="invalid-feedback">
                            <div >Password is required</div>
                        </div>
                        <div class="pt-4 pb-3">
                            <mat-checkbox class="example-margin "><span class="text-style">Keep me signed in</span></mat-checkbox>
                            <a class="float-right text-color text-style go-to-signin secondary-font center-align"
                                (click)="lostpas()">Forgot Your
                                Password?</a>
                        </div>
                       
                    </div>
                </div>
            </div>
            <div class="row">
                <div>
                    <div class="form-group">
                        <div class="error-small" *ngIf="loginForm.errors">
                            Invalid credentials!
                          </div>
                          <div class="error-small" *ngIf="loginForm.errors && loginForm.errors['error']">
                            Requested resource could not be found on this account
                          </div>
                        <button mat-raised-button color="primary" [disabled]="loading" class="btn-login block" [disabled]="isFormInValid">
                            <span *ngIf="loading"  class="spinner-border spinner-border-sm mr-1"></span>
                            {{ "Login " | titlecase }}
                        </button>

                    </div>
                    <div class="go-to-signin secondary-font center-align pt-4">
                        New User to MumtaliKati? <span class="signdiv" (click)="registernow()">Register now.</span>
                    </div>
                </div>
            </div>

        </form>
    </mat-dialog-content>
</div>


