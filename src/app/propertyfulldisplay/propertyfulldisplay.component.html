<app-top-bar [logred]="color" [data]="logocolor" [btncolor]="btnColor" [activeroute]="activeroutes"></app-top-bar>
<hr>
<div class="loading" *ngIf="loading ; else showList">
    <mat-spinner [diameter]="50"></mat-spinner>
</div>
<ng-template #showList>
    <div class="container" *ngIf="propertyDetail">
        <div class="">
            <ul class="breadcrumb row p-0 mt-4">
                <div class="col float-start ">
                    <li><a href="#" (click)="backotsearch()" (click)="addItem(propertyDetail[0].listingPurposeID!)"><i
                                class="fa fa-angle-left pe-2" aria-hidden="true"></i>Back to Search</a></li>

                </div>
                <div class="col" *ngIf="propertyDetail">
                    <li><a routerLink="">Mumtalikati</a></li>
                    <li *ngIf="propertyDetail[0]">
                        <a href="#"
                            routerLink="../propertydetails">{{getenum(propertyDetail[0].propertyMasterTypeID!)}}</a>
                    </li>
                    <li *ngIf="propertyDetail[0]"><a href="#">{{propertyDetail[0].propertySubTypeName}}</a></li>
                    <li *ngIf="propertyDetail[0]">{{propertyDetail[0].propertyUnitDescription}}</li>
                </div>
                <div class="col .d-md-none .d-lg-block"></div>
            </ul>
        </div>

        <div *ngFor="let property of propertyDetail">
            <div class="row mt-4 pb-4">
                <div class="col-md-4">
                    <div>
                        <h2 class="h2color">
                            For Rent
                        </h2>
                    </div>
                    <div class="group">
                        <h4>
                            Bilal Groupâ€™s
                        </h4>
                    </div>
                    <div>
                        <table class="table">
                            <tbody>
                                <tr>
                                    <th class="header">Building Type</th>
                                    <td class="propertyb">{{property.propertySubTypeName}}</td>

                                </tr>
                                <tr>
                                    <th class="header">Building ID</th>
                                    <td class="propertyb">{{property.buildingNumber}}</td>

                                </tr>
                                <tr>
                                    <th class="header">Building Name</th>
                                    <td class="propertyb">{{property.propertyMasterName}}</td>

                                </tr>
                                <tr>
                                    <th class="header">Plot Number</th>
                                    <td class="propertyb">{{property.plotNumber}}</td>

                                </tr>
                                <tr>
                                    <th class="header">Unit ID</th>
                                    <td class="propertyb">{{property.propertyUnitID}}</td>

                                </tr>
                                <tr>
                                    <th class="header">Unit Category</th>
                                    <td class="propertyb">{{getpropertyunitCategoryid(unitcatID)}}</td>

                                </tr>
                                <tr>
                                    <th class="header">Built in year</th>
                                    <td class="propertyb">{{property.builtYear}}</td>

                                </tr>
                               
                                <tr *ngIf="PropertySubTypeID ==1 || PropertySubTypeID ==9  ; else noOfFloor">
                                    <th class="header">Floor #</th>
                                    <td class="propertyb">{{property.floorNumber}}</td>

                                </tr>
                                <ng-template #noOfFloor>
                                <tr *ngIf="property.numberofFloors !=null">
                                    <th class="header">No of Floor #</th>
                                    <td class="propertyb">{{property.numberofFloors}}</td>

                                </tr>
                            </ng-template>
                                <!-- <tr *ngIf="property.floorNumber !=0">
                                    <th class="header">Floor #</th>
                                    <td class="propertyb">{{property.floorNumber}}</td>

                                </tr> -->
                                <tr>
                                    <th class="header">Status</th>
                                    <td class="propertyb">{{getstatus(statuss)}}</td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="main">
                        <p><img class="pe-2 addess h2color" [src]=" location">{{property.addressStr}}</p>
                        <!-- <h4>Landlord</h4> -->
                    </div>
                    <div class=" d-flex gap-3 py-3" aria-current="true">
                        <div *ngIf="imageUser">
                            <img [src]="imageUser.imageString || defaultperfile" alt="" width="50px" height="50px"
                                class="rounded-circle">

                        </div>

                        <div class="d-flex gap-2 w-100 justify-content-between">
                            <div>
                                <h6 class="mb-0"><b>Landlord</b></h6>
                                <p class="mb-0 opacity-75">{{property.name}}</p>
                            </div>

                        </div>
                    </div>
                    <div class="row gx-2">
                        <div class="col">
                            <button mat-stroked-button color="primary" class=" px-5 border-r  "
                            (click)="oncallclick(call)">Call</button>
                        </div>
                        <div class="col">
                            <button mat-raised-button color="primary" class="px-5"
                            (click)="oncallclick(call)">Message</button>
                        </div>
                        
                    </div>
                </div>
                <div class="col-md-8 mt-4" *ngIf="property.imageString">
                    <div [style.height]="auto">
                        <mat-carousel timings="250ms ease-in" [autoplay]="true" interval="5000" color="accent"
                            maxWidth="auto"  proportion="50" slides="5" [loop]="true" [hideArrows]="false"
                            [hideIndicators]="false" [useKeyboard]="false" [useMouseWheel]="false" orientation="ltr">
                            <mat-carousel-slide #matCarouselSlide
                                *ngFor="let image of property.imageString; let i = index"
                                [image]="image" overlayColor="#00000040"
                                [hideOverlay]="false"></mat-carousel-slide>
                        </mat-carousel>
                    </div>
                    <mat-card class="example-card ">

                        <!-- <div class="cardimg">
                            <img mat-card-image [src]=" property.imageString[0] || bydefault" alt='' class="hhjj">
                            <div class="mum-h">
                                <h5 class="mum-com">Mumtalikati.com.om</h5>
                            </div>

                             <img [src]="favoriteicon" alt="" class="favorite">
                        </div> -->
                        <mat-card-content>
                            <h5>
                                OMR {{property.rentPrice}}/mon
                            </h5>
                            <div class="dis-flex" clas="pe-4">
                                <p class="icon pe-2"><img class="pe-2" [src]="areaimg">{{property.sqft}}SQM</p>
                                <p class="icon pe-2"><img class="pe-2" [src]="bedroomimg">{{property.bedRoom}} Bedrooms
                                </p>
                                <p class="icon pe-2"><img class="pe-2" [src]="washroomimg">{{property.bathRoom}}
                                    Bathrooms
                                </p>
                                <p class="icon pe-2"><img class="pe-2" [src]="kitchen">{{property.kitchen}} Kitchen
                                </p>
                                <p class="icon pe-2"><img class="pe-2" [src]="hall">{{property.hall}} Hall
                                </p>
                            </div>
                            <h5>
                                Property Details
                            </h5>
                            <p>
                                {{property.propertyMasterDescription}}
                            </p>
                            <h5>
                                Features
                            </h5>
                            <div class="container">
                                <div class="row gx-2 justify-content-md-center btn-row " *ngIf="propertyFeature">
                                    <div class="col-auto pt-2" *ngFor="let features of propertyFeature">
                                        <button mat-raised-button class="" [disabled]="true"
                                            id="view-cmp-btn">{{features.feature.desc}}</button>
                                    </div>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>

            </div>
        </div>
    </div>
    <ng-template #call>

        <div class="modal-header">
        </div>
        <div class="modal-body">
            <div>
                <h6 class="text-cente">
                    Contact Us
                </h6>

            </div>
            <div *ngFor="let property of propertyDetail">
                <h6 class="text-cente" #elementContentToCopy>
                    <img [src]="phoneicon"> +{{property.contact}} <img [src]="copyIcon" class="btn" height="30px"
                        (click)="copyHeroName(elementContentToCopy)">
                </h6>
            </div>
            <hr>
            <div *ngFor="let property of propertyDetail">
                <h6 class="text-cente"> {{property.name}}</h6>
            </div>
            <hr>
            <div *ngFor="let property of propertyDetail">
                <p class="align-item">
                    Please quote Building ID {{property.buildingNumber}}
                    when calling to landlord.
                </p>
            </div>
            <hr>
            <div>
                <p class="align-item">
                    Do you want more options? Finding the right property for you is easier with notifications
                </p>
            </div>
        </div>
        <div class="modal-footer">
            <div class="row gx-2">
                <div class="col">
                    <button type="button" color="primary" class="border-done" (click)="closepop()">I want to be
                        notified</button>

                </div>
                <div class="col">
                    <button type="button" class="  border-btn" (click)="closepop()">Maybe Later</button>
                </div>
            </div>
        </div>
    </ng-template>

</ng-template>